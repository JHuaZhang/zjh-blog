---
title: CI-CD功能简介
order: 1
nav:
  title: CICD
  order: 7
---

## 1、为什么要做CI/CD？

做CI/CD的核心目的是自动化软件的构建、测试、部署流程，解决传统开发模式下的效率低、风险高、协作难等问题，最终实现快速、稳定、高质量地交付软件。它的价值可以从开发、测试、运维、业务四个维度具体拆解：

**①、解决集成地狱，提升开发协作效率**

在没有CI的传统模式中，开发者各自在本地写代码，往往等到项目后期才合并代码。此时会出现大量代码冲突，排查和解决冲突需要耗费数天甚至数周，这就是所谓的集成地狱。

- CI（持续集成） 要求开发者频繁地将代码合并到主干分支（比如每天1-2次），每次合并后都会自动触发构建和单元测试。
- 一旦出现冲突或代码错误，能立刻被发现，开发者可以在问题还很小的时候快速修复，避免后期大规模返工。

**②、自动化测试，保障代码质量**

手动测试不仅效率低，还容易遗漏，尤其在代码频繁变更时，很难保证测试覆盖率。

- CI流程中，代码合并后会自动触发一系列测试（单元测试、集成测试、代码质量扫描等）。
- 只有测试全部通过的代码，才能进入后续环节，从根源上减少 “带病代码” 流入生产环境的可能。
- 同时，自动化测试也解放了测试人员的重复劳动，让他们可以专注于更复杂的场景测试。

**③、自动化部署，缩短交付周期**

传统的手动部署流程繁琐且容易出错：手动打包、上传服务器、启停服务、配置环境，不仅耗时，还可能因为人为操作失误导致线上故障。

- CD（持续交付 / 持续部署） 会将通过测试的代码自动打包、部署到测试 / 预发 / 生产环境：
  - 持续交付：自动化到预发环境，人工确认后再发布到生产；
  - 持续部署：全程自动化，代码通过测试后直接发布到生产。
- 这让软件的交付周期从 “按月 / 按季度” 缩短到 “按天 / 按小时”，甚至可以实现一天多次发布，快速响应用户需求。

**④、降低发布风险，快速回滚**

传统的 “大版本一次性发布” 风险极高，一旦出现问题，影响范围大且回滚困难。

- CI/CD 支持增量发布（比如灰度发布、金丝雀发布），可以先让小部分用户使用新版本，验证无问题后再全量推广。
- 若发布后发现故障，CI/CD工具可以一键快速回滚到上一个稳定版本，将故障影响降到最低。

## 2、CI/CD实现方案

下面是实现CI/CD的主要方法，分别就是使用第三方git仓库，通过其中的Action流水线，实现代码的自动部署和构建，而另一类则是通过本地部署的方式，本地部署的方式更加安全可靠，不过上手成本也相对要高一点。

### 2.1、入门首选SaaS类CI/CD

无需自建服务器，注册即用，适合个人 / 小团队与国内网络环境，优先推荐。

| 工具                    | 核心优势                                     | 部署形态    | 推荐场景                          |
| ----------------------- | -------------------------------------------- | ----------- | --------------------------------- |
| GitHub Actions          | 与GitHub仓库无缝集成，模板丰富，免费额度充足 | SaaS        | GitHub 托管项目、开源项目、云原生 |
| GitLab CI/CD            | 内置GitLab，代码 + CI/CD一体化，yaml配置简洁 | SaaS/自托管 | GitLab生态、需私有化部署          |
| Gitee Go（Gitee CI/CD） | 国内网络稳定，中文界面，Gitee 深度集成       | SaaS        | 国内团队、Gitee 托管、低网络延迟  |
| CircleCI                | 云原生优化，并行构建快，支持 GitHub/GitLab   | SaaS        | 容器化项目、快速迭代小团队        |

### 2.2、自托管核心CI/CD

适合需要深度定制流程、隐私合规或传统架构的场景，学习曲线略高但生态极强。

| 工具             | 核心优势                                           | 部署形态    | 推荐场景                      |
| ---------------- | -------------------------------------------------- | ----------- | ----------------------------- |
| Jenkins          | 插件生态最丰富，适配所有主流技术栈，开源免费       | 自托管      | 复杂流程定制、传统 / 混合架构 |
| 极狐GitLab CI/CD | 开源版可私有化，一体化 DevOps（代码、CI/CD、安全） | 自托管/SaaS | 企业级、容器化、国产化适配    |
| Drone            | 轻量容器原生，配置简单，适合云原生项目             | 自托管      | Kubernetes生态、微服务        |

## 3、配套辅助工具

用于版本控制、制品管理、部署验证、监控告警，完善CI/CD全链路。

1. 版本控制（触发流水线的源头）：
   1. Git：基础版本控制工具，搭配 GitHub/GitLab/Gitee 使用。
   2. Gitee/GitHub/GitLab：代码托管 + 触发 CI/CD 事件。
2. 制品仓库（存储构建产物）：
   1. Nexus Repository OSS：开源制品库，支持 Maven、Docker、npm 等。
   2. Harbor：Docker 镜像仓库，适合容器化项目。
3. 部署与编排（CD关键环节）：
   1. Kubernetes（K8s）：容器编排，适合云原生应用大规模部署。
   2. Argo CD：GitOps 风格的 CD 工具，与 K8s 深度集成，适合容器化部署。
   3. Ansible：自动化配置管理，适合传统服务器批量部署。
4. 测试与质量保障：
   1. JUnit：单元测试框架，CI 阶段自动执行。
   2. SonarQube：代码质量扫描，提前发现漏洞与坏味道。
5. 监控与告警：
   1. Prometheus + Grafana：监控流水线状态与部署后服务指标。
   2. Slack / 企业微信 / 钉钉：构建 / 部署结果即时通知。

后面的学习中，我们将按照如下方向深入学习CI/CD。

- 第一步：选 SaaS 工具（GitHub Actions/Gitee Go/GitLab CI/CD），用模板跑通 “代码提交→自动构建→单元测试→部署到测试环境” 的最小流水线。
- 第二步：熟悉 yaml 配置语法，自定义构建脚本与测试步骤。
- 第三步：按需引入制品库（如 Harbor）、部署工具（如 K8s/Argo CD），扩展到完整 CD 流程。
- 第四步：若需深度定制，再学习 Jenkins / 极狐 GitLab 自托管部署与插件配置。
